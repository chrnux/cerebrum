

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1   Brief introduction to dnsinfo &mdash; Cerebrum 0.9.16 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.9.16',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Cerebrum 0.9.16 documentation" href="../../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../../index.html">Cerebrum 0.9.16 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="brief-introduction-to-dnsinfo">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;Brief introduction to dnsinfo</a><a class="headerlink" href="#brief-introduction-to-dnsinfo" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#brief-introduction-to-dnsinfo" id="id1">1&nbsp;&nbsp;&nbsp;Brief introduction to dnsinfo</a><ul class="auto-toc">
<li><a class="reference internal" href="#introduction" id="id2">1.1&nbsp;&nbsp;&nbsp;Introduction</a><ul class="auto-toc">
<li><a class="reference internal" href="#the-full-version-of-dnsinfo" id="id3">1.1.1&nbsp;&nbsp;&nbsp;The full version of Dnsinfo</a></li>
<li><a class="reference internal" href="#limitations" id="id4">1.1.2&nbsp;&nbsp;&nbsp;Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-client" id="id5">1.2&nbsp;&nbsp;&nbsp;The client</a><ul class="auto-toc">
<li><a class="reference internal" href="#available-commands" id="id6">1.2.1&nbsp;&nbsp;&nbsp;Available commands</a><ul class="auto-toc">
<li><a class="reference internal" href="#arguments" id="id7">1.2.1.1&nbsp;&nbsp;&nbsp;Arguments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples" id="id8">1.2.2&nbsp;&nbsp;&nbsp;Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#todo" id="id9">1.3&nbsp;&nbsp;&nbsp;TODO</a><ul class="auto-toc">
<li><a class="reference internal" href="#ting-som-m-fikses-f-r-versjon-1" id="id10">1.3.1&nbsp;&nbsp;&nbsp;Ting som m? fikses f?r Versjon 1</a></li>
<li><a class="reference internal" href="#ting-som-kan-vente-til-version-1-1" id="id11">1.3.2&nbsp;&nbsp;&nbsp;Ting som kan vente til Version &gt;= 1.1:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">1.1&nbsp;&nbsp;&nbsp;Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>dnsinfo is a system for storing information about computers in a
network.  Some features include:</p>
<ul class="simple">
<li>building of bind compatible zone files with data such as<ul>
<li>A records</li>
<li>CNAMEs</li>
<li>MX records</li>
<li>HINFO records</li>
<li>SRV records</li>
<li>automatic reverse map data = forward map with option to override</li>
<li>mx-sets makes it easier to maintain the diversity of MX records</li>
<li>etc.</li>
</ul>
</li>
<li>various checks to maintain data consistency</li>
<li>hosts file creation</li>
<li>associating comments/contact information with machines</li>
<li>machine netgroups</li>
<li>delegation of administrative-rights for subnets to a group of people</li>
</ul>
<p>Dnsinfo is built as an extensiton module to Cerebrum.  While the current
implementation is only loosely tied to the cerebrum-core schema, a
tighter integration is expected in the future.</p>
<div class="section" id="the-full-version-of-dnsinfo">
<h3><a class="toc-backref" href="#id3">1.1.1&nbsp;&nbsp;&nbsp;The full version of Dnsinfo</a><a class="headerlink" href="#the-full-version-of-dnsinfo" title="Permalink to this headline">¶</a></h3>
<p>The term Dnsinfo has been used at UoO for some time.  It referes to a
non-existing software package that can be used to keep track of some
information about computers.  Exactly what Dnsinfo was supposed to do is
unclear; some versions were supposed to contain detailed information
about each computer, such as processor type, memory etc, while others
wanted administrative information like where the system was bought
etc.</p>
<p>The diversity of the information that one could want in an Dnsinfo-like
system could result in a fairly complex piece of software that would
take a long time to develop.</p>
<p>The Dnsinfo implementation described in this document only has a subset
of these features.</p>
</div>
<div class="section" id="limitations">
<h3><a class="toc-backref" href="#id4">1.1.2&nbsp;&nbsp;&nbsp;Limitations</a><a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h3>
<p>Dnsinfo does not support all records that bind supports.  DNS records not
supported by Dnsinfo should be placed above the &#8216;AUTOGENERATED&#8217; part of
the generated file.</p>
</div>
</div>
<div class="section" id="the-client">
<h2><a class="toc-backref" href="#id5">1.2&nbsp;&nbsp;&nbsp;The client</a><a class="headerlink" href="#the-client" title="Permalink to this headline">¶</a></h2>
<p>JBofh may be used to interact with dnsinfo.  All commands are placed in
the &#8220;host&#8221; group.  For instance, the command to allocate an IP for a new
host is &#8220;host add&#8221;.</p>
<div class="section" id="available-commands">
<h3><a class="toc-backref" href="#id6">1.2.1&nbsp;&nbsp;&nbsp;Available commands</a><a class="headerlink" href="#available-commands" title="Permalink to this headline">¶</a></h3>
<p>The following commands has been implemented:</p>
<div class="highlight-python"><pre>bofh&gt; help host
   host       - Commands for administrating IP numbers
    a_add       host_name subnet_or_ip [force]
                - legg til en a-record
    a_remove    host_name [ip]
                - fjern en a-record
    add         host_name_repeat subnet_or_ip hinfo comment contact [force]
                - Registrerer ip-addresse for en ny maskin
    cname_add   alias_name existing_host [force]
                - registrer et cname
    comment     host_name comment
                - Sette kommentar for en gitt maskin
    contact     host_name contact
                - Oppgi contact for gitt maskin
    hinfo_list
                - list lovlige hinfo verdier
    hinfo_set   host_name hinfo
                - sette hinfo
    info        host_id
                - Lister data for gitt hostnavn/ip-addresse eller cname
    mx_add      mx_set pri host_name
                - legg ny entry til et MX set
    mx_remove   mx_set host_name
                - fjern entry fra et MX set
    mx_set      host_name mx_set
                - sette MX
    mx_show     [mx_set]
                - Vid definisjonen av et MX set
    remove      host_id [force]
                - Sletter data for oppgitt hosnavn/ip-nr
    rename      host_id host_id
                - Forande et IP-nr/navn til et annet IP-nr/navn.
    srv_add     service_name pri weight port host_name
                - Opprette en SRV record
    srv_remove  service_name ttl pri weight port host_name
                - Fjerne en SRV record
    ttl_set     host_name ttl
                - Set TTL for en DNS-owner
    txt_set     host_name txt
                - sette TXT
    unused_list subnet_or_ip
                - list ledige ipnr
bofh&gt; help group
   group      - Group commands
    hadd           host_name gname [op]
                   - add machine to a netgroup
    host           host_name
                   - list groups where host is a member
    hrem           host_name gname [op]
                   - remove machine from a netgroup</pre>
</div>
<p>When creating an ip-number and subnet_or_ip points to a subnet, the
first free IP-number in the subnet is used.  Dnsinfo will not
automatically use IP-numbers in reserved ranges, you have to type the
IP and use the &#8216;force&#8217; option for this.</p>
<div class="section" id="arguments">
<h4><a class="toc-backref" href="#id7">1.2.1.1&nbsp;&nbsp;&nbsp;Arguments</a><a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h4>
<p>The various argument types are:</p>
<blockquote>
<div><dl class="docutils">
<dt>host_name</dt>
<dd>The name of a host (does not have to be a FQDN i.e. ending with .com.)</dd>
<dt>host_name_repeat</dt>
<dd>The hostname may optionally be written as pc[001..150] to allocate
150 ip-numbers in one go.  Any leading zeroes in the first
argument is preserved.</dd>
<dt>host_id</dt>
<dd>host_name of ip-number</dd>
<dt>hinfo</dt>
<dd>The hinfo alias.  Use &#8216;ip list_hinfo&#8217; for legal values.</dd>
<dt>mailserver_id</dt>
<dd>The name of the mx_set.  Use &#8216;ip list_mx_sets&#8217; for legal values.</dd>
<dt>comment</dt>
<dd>Freetext field</dd>
<dt>contact</dt>
<dd>Freetext field.  Should some time in the future be connected to a
Cerebrum entity-id</dd>
<dt>subnet_or_ip</dt>
<dd>A subnet or an IP-address.  129.240.x.y = IP.  129.240.x or
129.240.x.y/ indicates a subnet.</dd>
<dt>force</dt>
<dd>Some operations require an &#8220;Y&#8221; to succeed if exsisting records has
the same name etc.</dd>
</dl>
</div></blockquote>
<p>Most query operations accept either a host_name or an ip_number for
lookup operations.  If a name is used where an IP is expected (like
&#8220;ip a_rem&#8221;), and the IP is not unique, and error message will be
shown.  (By the time you read this, a idtype:id syntax is probably
also supported)</p>
</div>
</div>
<div class="section" id="examples">
<h3><a class="toc-backref" href="#id8">1.2.2&nbsp;&nbsp;&nbsp;Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>(The hinfo_codes and mx_set names are result of automatic conversion,
and should be renamed manually)</p>
<p>Allocating an ip-number.  &#8216;?&#8217; may be used for help for each argument
like elsewhere in jbofh:</p>
<div class="highlight-python"><pre>bofh&gt; host add
Enter host name(s) &gt;?
Multiple hostnames may be entered like pcusit[01..30]
Enter host name(s) &gt;gazonk
Enter subnet or ip &gt;?
Enter subnet or ip for this operation.  129.240.x.y = IP.  129.240.x or 129.240.x.y/ indicates a subnet.
Enter subnet or ip &gt;129.240.200
Enter HINFO code &gt;?
Legal values are:
 - win      -&gt; IBM-PC   WINDOWS
 - linux    -&gt; IBM_PC   LINUX
 - printer  -&gt; PRINTER  PRINTER
 - unix     -&gt; UNIX     UNIX
 - nett     -&gt; NET      NET
 - mac      -&gt; MAC      DARWIN
 - other    -&gt; OTHER    OTHER
Enter HINFO code &gt;linux
Enter comment &gt;?
Typically location
Enter comment &gt;test maskin
Enter contact &gt;?
Typically an e-mail address
Enter contact &gt;foo@bar.com
name                           ip
gazonk                         129.240.201.158</pre>
</div>
<p>Several machines can be registered in one go:</p>
<div class="highlight-python"><pre>bofh&gt; host add testpc[01..05] 129.240.130 linux "fine maskiner" "foo@bar.com"
name                           ip
testpc01                       129.240.130.21
testpc02                       129.240.130.22
testpc03                       129.240.130.23
testpc04                       129.240.130.24
testpc05                       129.240.130.25
bofh&gt; host add (finmaskin fineremaskin) 129.240.130 linux "fine maskiner" "foo@bar.com"
name                           ip
finmaskin                      129.240.130.26
name                           ip
fineremaskin                   129.240.130.28</pre>
</div>
<p>Showing information about a machine:</p>
<div class="highlight-python"><pre>bofh&gt; host info gazonk
Name:                  gazonk.uio.no.
                       contact=foo@bar.com
                       comment=test maskin
A-records              IP
  gazonk.uio.no.       129.240.201.158
Hinfo:                 os=IBM_PC cpu=LINUX
MX-set:                mx_target_1</pre>
</div>
<p>Adding an a-record with explicit IP on an unknown subnet:</p>
<div class="highlight-python"><pre>bofh&gt; host a_add barbar 127.0.0.1
Error: CerebrumError: Unknown subnet.  Must force
bofh&gt; host a_add barbar 127.0.0.1 y
OK, ip=127.0.0.1</pre>
</div>
<p>Displaying a mx-target:</p>
<div class="highlight-python"><pre>bofh&gt; host mx_show  mx_target_1
MX-set               TTL          Priority   Target
mx_target_1          &lt;not set&gt;    10         smtp.uio.no.</pre>
</div>
<p>Renaming a machine, either by name or IP:</p>
<div class="highlight-python"><pre>bofh&gt; host rename smtp lesemail
OK, dns-owner smtp renamed to lesemail
bofh&gt; host rename morgoth 129.240.201.239
OK, ip-number morgoth renamed to 129.240.201.239</pre>
</div>
<p>Note that all references to smtp has been updated (because the change
was done directly in the dns-owner table):</p>
<div class="highlight-python"><pre>bofh&gt; host mx_show  mx_target_1
MX-set               TTL          Priority   Target
mx_target_1          &lt;not set&gt;    10         lesemail.uio.no.</pre>
</div>
<p>Adding a cname:</p>
<div class="highlight-python"><pre>bofh&gt; host cname_add barfoo gazonk
OK, cname registered for gazonk</pre>
</div>
<p>Deleting a host:</p>
<div class="highlight-python"><pre>bofh&gt; host remove gazonk
Error: DNSError: A-record is used as target, or has a host_info entry
bofh&gt; host cname_remove barfoo
OK, cname barfoo completly removed
bofh&gt; host remove gazonk
OK, DNS-owner gazonk completly removed</pre>
</div>
<p>Somethimes the deletion must be forced:</p>
<div class="highlight-python"><pre>bofh&gt; host info harell-gw
Name:                  harell-gw.uio.no.
                       contact=&lt;not set&gt;
                       comment=Helge Falkenberg-Arell
A-records              IP
  harell-gw.uio.no.    129.240.209.241
  harell-gw.uio.no.    129.240.230.103
Hinfo:                 os=CISCO cpu=IOS
MX-set:                mx_target_1
bofh&gt; host remove harell-gw
Error: CerebrumError: Multiple records would be deleted, must force
bofh&gt; host remove harell-gw Y
OK, DNS-owner harell-gw completly removed</pre>
</div>
</div>
</div>
<div class="section" id="todo">
<h2><a class="toc-backref" href="#id9">1.3&nbsp;&nbsp;&nbsp;TODO</a><a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<p>Utest?ende ting</p>
<div class="section" id="ting-som-m-fikses-f-r-versjon-1">
<h3><a class="toc-backref" href="#id10">1.3.1&nbsp;&nbsp;&nbsp;Ting som m? fikses f?r Versjon 1</a><a class="headerlink" href="#ting-som-m-fikses-f-r-versjon-1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>?</li>
</ul>
</div>
<div class="section" id="ting-som-kan-vente-til-version-1-1">
<h3><a class="toc-backref" href="#id11">1.3.2&nbsp;&nbsp;&nbsp;Ting som kan vente til Version &gt;= 1.1:</a><a class="headerlink" href="#ting-som-kan-vente-til-version-1-1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Dnsinfo b?r ha foreign-keys mot Cerebrum entiteter for bla. contact-info.</li>
<li>rettighetsh?ndtering (innsnevring av rettigheter)</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1&nbsp;&nbsp;&nbsp;Brief introduction to dnsinfo</a><ul>
<li><a class="reference internal" href="#introduction">1.1&nbsp;&nbsp;&nbsp;Introduction</a><ul>
<li><a class="reference internal" href="#the-full-version-of-dnsinfo">1.1.1&nbsp;&nbsp;&nbsp;The full version of Dnsinfo</a></li>
<li><a class="reference internal" href="#limitations">1.1.2&nbsp;&nbsp;&nbsp;Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-client">1.2&nbsp;&nbsp;&nbsp;The client</a><ul>
<li><a class="reference internal" href="#available-commands">1.2.1&nbsp;&nbsp;&nbsp;Available commands</a><ul>
<li><a class="reference internal" href="#arguments">1.2.1.1&nbsp;&nbsp;&nbsp;Arguments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">1.2.2&nbsp;&nbsp;&nbsp;Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#todo">1.3&nbsp;&nbsp;&nbsp;TODO</a><ul>
<li><a class="reference internal" href="#ting-som-m-fikses-f-r-versjon-1">1.3.1&nbsp;&nbsp;&nbsp;Ting som m? fikses f?r Versjon 1</a></li>
<li><a class="reference internal" href="#ting-som-kan-vente-til-version-1-1">1.3.2&nbsp;&nbsp;&nbsp;Ting som kan vente til Version &gt;= 1.1:</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/doc/extensions/dns/dns_enduser.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../../../index.html">Cerebrum 0.9.16 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, University of Oslo.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>