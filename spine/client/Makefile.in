##
## Makefile for SpineClient
##

INSTALL = @INSTALL@
pythondir = @PYTHONDIR@

.PHONY: all install install-lib install-cerews clean distclean

sources = SpineClient.py
cerews = cerews_services.py cerews_services_types.py


all: $(cerews)

$(cerews): ../../Cerebrum/lib/cerews/cerews.wsdl
	wsdl2py -f $<

install: install-lib install-cerews

install-lib: $(sources)
	$(INSTALL) -d "$(pythondir)"
	$(INSTALL) -m 644 $(sources) "$(pythondir)"
	$(INSTALL) -m 644 ../lib/server/idl/SpineCore.idl "$(pythondir)"

install-cerews: $(cerews)
	$(INSTALL) -d "$(pythondir)/Cerebrum"
	$(INSTALL) -m 664 ../../Cerebrum/__init__.py "$(pythondir)/Cerebrum"
	$(INSTALL) -d "$(pythondir)/Cerebrum/lib"
	$(INSTALL) -m 664 ../../Cerebrum/lib/__init__.py "$(pythondir)/Cerebrum/lib"
	$(INSTALL) -d "$(pythondir)/Cerebrum/lib/cerews"
	$(INSTALL) -m 664 ../../Cerebrum/lib/cerews/__init__.py "$(pythondir)/Cerebrum/lib/cerews"
	$(INSTALL) -m 644 $(cerews) "$(pythondir)/Cerebrum/lib/cerews"
	$(INSTALL) -m 644 ../../Cerebrum/lib/cerews/SignatureHandler.py "$(pythondir)"


clean:
	-rm $(cerews)

distclean: clean

