##
## Makefile for htdocs/
##

CP = cp
INSTALL = @INSTALL@
WEBROOT = @webroot@

.PHONY: all clean distclean
sources = $(wildcard *.py)
images = $(wildcard img/*.png img/*.gif)
jscripts = $(wildcard jscript/*.js)

all: 
	$(MAKE) -C css $@

install: install-lib
	$(MAKE) -C css $@

install-lib: install-py install-images install-jscripts install-yui
	
install-py: $(sources)
	$(INSTALL) -d ${WEBROOT}/htdocs/
	$(INSTALL) -m 644 $^ ${WEBROOT}/htdocs/

install-images: $(images)
	$(INSTALL) -d ${WEBROOT}/htdocs/img/
	$(INSTALL) -m 644 $^ ${WEBROOT}/htdocs/img/

install-jscripts: $(jscripts)
	$(INSTALL) -d ${WEBROOT}/htdocs/jscript/
	$(INSTALL) -m 644 $^ ${WEBROOT}/htdocs/jscript/

install-yui:
	$(INSTALL) -d ${WEBROOT}/htdocs/yui/
	$(CP) -r yui/build ${WEBROOT}/htdocs/yui/

clean:
	$(MAKE) -C css $@

distclean: clean
	rm -f Makefile
	$(MAKE) -C css $@
