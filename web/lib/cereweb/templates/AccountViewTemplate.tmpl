#from Cerebrum.web.InitTemplate import InitTemplate
#extends EntityViewTemplate
#import forgetHTML
#from Cerebrum.web.TableView import TableView
#from Cerebrum.web.utils import url
#from Cerebrum.web import HistoryLog

#def getAction
$url("account/action")#slurp
#end def

#def viewAccountShort($account, $show_owner=False)
<h1>$_("Account") $account.name</h1>
<div class="info">
<dl>
    <dt>$_("Date created")</dt>
    <dd>$account.create_date.Format('%Y-%m-%d')</dd>

    <dt>$_("Expire date")</dt>
#if $account.expire_date
    <dd>$account.expire_date.Format('%Y-%m-%d')</dd>
#else
    <dd>$_("No expire date set")</dd>
#end if

#set $creator = $account.get_creator_object()
#set $creatorurl = $url("%s/view?id=%d" % ($creator.type, $creator.id))
    
    <dt>$_("Created by")</dt>
    <dd><a href="$creatorurl">$creator.name ($creator.type)</a></dd>

#if $show_owner
#set $owner = $account.get_owner_object()
#set $ownerurl = $url("%s/view?id=%d" % ($owner.type, $owner.id))
    <dt>$_("Owned by")</dt>
    <dd><a href="$ownerurl">$owner.name ($owner.type)</a></dd>
#end if

    <dt>$_("Spreads")</dt>
    <dd>$account.spread</dd>
</dl>
</div>

<form action="$getAction()" method="POST">
    <input type="hidden" name="id" value="$account.id" />
    <input type="submit" name="delete_account" value="$_("Remove account")" />
    <input type="submit" name="edit_account" value="$_("Edit account")" />
</form>
#end def

#def viewAccount($account)
$viewAccountShort($account, True)
$view_entity($account)
#end def
