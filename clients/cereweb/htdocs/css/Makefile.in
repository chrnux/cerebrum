##
## Makefile for Cheetah-based stylesheets (CSS)
##
SHELL = @SHELL@
INSTALL = @INSTALL@
CHEETAH = @CHEETAH@

prefix = @prefix@
libdir = @libdir@
WEBROOT = @webroot@

targets = $(patsubst %.tmpl,%.css, $(wildcard *.tmpl))
stylesheets = $(wildcard *.css) $(targets)
backups = $(patsubst %.css,%.css_bak, $(targets))

.PHONY: all clean distclean print

all: $(targets)

%.css: %.tmpl
	$(CHEETAH) fill --oext css $<

clean:
	rm -f *~ 
	rm -f $(targets)
	rm -f $(backups)

distclean: clean
	rm -f Makefile

install: $(stylesheets) 
	$(INSTALL) -d ${WEBROOT}/htdocs/css/
	$(INSTALL) -m 644 $^ ${WEBROOT}/htdocs/css/
