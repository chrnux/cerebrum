##
## Makefile for SpineClient
##

INSTALL = @INSTALL@
pythondir = @PYTHONDIR@
prefix = @prefix@
exec_prefix = @exec_prefix@
SBINDIR = @sbindir@

.PHONY: all install install-lib clean distclean

libs = lib/SignatureHandler.py lib/dom.py lib/cerews_objects.py lib/__init__.py lib/cerews.wsdl
wsdlout = lib/cerews_services.py lib/cerews_services_types.py

all: $(wsdlout)

$(wsdlout): lib/cerews.wsdl
	wsdl2py -o lib $< || wsdl2py -f $< -o lib

install: install-lib
	$(INSTALL) -d "$(SBINDIR)"
	$(INSTALL) -m 755 cerews.py "$(SBINDIR)/"


install-lib: $(wsdlout)
	$(INSTALL) -d "$(pythondir)/Cerebrum/lib/cerews"
	$(INSTALL) -m 644 $(libs) $(wsdlout) "$(pythondir)/Cerebrum/lib/cerews"

clean:
	-rm $(wsdlout)

distclean: clean

